**Билет 26. Агрегатные функции в операторе выборки языка SQL**

### Основные агрегатные функции
- `COUNT(*)` — число строк (включая NULL).  
- `COUNT(col)` — число **ненулевых** значений в столбце.  
- `SUM(col)`, `AVG(col)` — сумма и среднее (только числовые типы).  
- `MIN(col)`, `MAX(col)` — минимум/максимум (работают с числами, датами, строками).  

### Обработка NULL и DISTINCT
- Все агрегаты (кроме `COUNT(*)`) **игнорируют NULL**.  
- `DISTINCT` внутри функции устраняет дубликаты:  
  ```sql
  SELECT AVG(DISTINCT salary) FROM employees;
  ```

### Применимость к типам
- `SUM`, `AVG` — только числовые (`INTEGER`, `NUMERIC`, `REAL`).  
- `MIN`, `MAX` — любые сравнимые типы (`TEXT`, `DATE`, `TIMESTAMP`).  
- `COUNT` — применим к любому столбцу.

### Группировка (`GROUP BY`)
Управляет уровнем агрегации:  
```sql
SELECT department, COUNT(*), AVG(salary)
FROM employees
GROUP BY department;
```
— вычисляет статистику **по каждой группе**, а не по всей таблице.

### Важно
- Столбцы в `SELECT`, не входящие в агрегат, **должны быть в `GROUP BY`**.  
- `HAVING` фильтрует результаты **после** агрегации:  
  ```sql
  SELECT category, SUM(price)
  FROM products
  GROUP BY category
  HAVING SUM(price) > 10000;
  ```

Агрегаты — основа аналитических запросов в SQL.

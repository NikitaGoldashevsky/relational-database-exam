**Билет 11. Нормальные формы 1–2**

### Первая нормальная форма (1NF)
- **Требование**: все атрибуты атомарны — недопустимы множественные или составные значения.
- **Нарушение**: столбец `телефоны` содержит список номеров через запятую.
- **Приведение**: вынести телефоны в отдельную таблицу:
  ```sql
  CREATE TABLE пользователи (id SERIAL PRIMARY KEY, имя TEXT);
  CREATE TABLE телефоны (пользователь_id INT REFERENCES пользователи(id), номер TEXT);
  ```

### Вторая нормальная форма (2NF)
- **Требование**: отношение в 1NF + каждый неключевой атрибут полностью зависит от **всего** первичного ключа (актуально для составных PK).
- **Нарушение**: в таблице `заказ_товар(заказ_id, товар_id, дата_заказа, название_товара)` атрибут `дата_заказа` зависит только от `заказ_id`, а `название_товара` — только от `товар_id`.
- **Приведение**: декомпозиция:
  ```sql
  CREATE TABLE заказы (id SERIAL PRIMARY KEY, дата DATE);
  CREATE TABLE товары (id SERIAL PRIMARY KEY, название TEXT);
  CREATE TABLE позиции (заказ_id INT, товар_id INT, 
    PRIMARY KEY (заказ_id, товар_id),
    FOREIGN KEY (заказ_id) REFERENCES заказы(id),
    FOREIGN KEY (товар_id) REFERENCES товары(id)
  );
  ```

Переход к 1NF и 2NF устраняет избыточность и аномалии обновления.

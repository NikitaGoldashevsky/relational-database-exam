**Билет 39. Индексация данных**

### Определение
**Индекс** — вспомогательная структура, ускоряющая поиск данных по определённым столбцам за счёт дополнительного хранения.

---

### Классификация индексов

#### По логическому назначению
- **Первичный (Primary)** — строится по первичному ключу, уникален.
- **Вторичный** — по любому другому атрибуту (может быть неуникальным).

#### По физической организации
- **Кластерный (Clustered)** — строки таблицы физически упорядочены по значению индекса (только **один** на таблицу).  
  В PostgreSQL: нет настоящих кластерных индексов, но есть `CLUSTER` команда для однократной сортировки.
- **Некластерный (Non-clustered)** — индекс хранится отдельно; указывает на физическое расположение строк.

#### По плотности
- **Плотный** — по одной записи на каждую строку таблицы (обычно для неключевых атрибутов).
- **Разреженный** — по одной записи на блок/страницу (используется в кластерных индексах, например, в B+‑деревьях верхнего уровня).

#### По уровням
- **Многоуровневые** — иерархия индексов (например, корень → промежуточные узлы → листья в B+‑дереве).

---

### Структуры хранения
- **B+‑дерево** — стандарт для большинства СУБД (PostgreSQL, MySQL InnoDB). Эффективен для диапазонных запросов.
- **Хеш-индекс** — только для точного совпадения (`=`), быстрый, но не поддерживает порядок.
- **GIN/GiST** (PostgreSQL) — для составных типов (массивы, JSON, геометрия).

---

### Синтаксис (PostgreSQL)
```sql
-- Создание
CREATE INDEX idx_name ON table_name (column);
CREATE UNIQUE INDEX idx_uniq ON table_name (col1, col2);

-- Удаление
DROP INDEX idx_name;
```

> ⚠️ Индексы ускоряют `SELECT`, но замедляют `INSERT`/`UPDATE`/`DELETE`.
